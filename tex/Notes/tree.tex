Приемы для работы с деревьями:
\begin{enumerate}
	\setlength\itemsep{0em}
	\item Двоичные подъемы
	\item Поддеревья как отрезки Эйлерова обхода
	\item Вертикальные пути в Эйлеровом обходе (на ребрах вниз $+k$, на ребрах вверх $-k$).
	\item Храним в вершине значение функции на пути от корня до нее, дальше LCA.
	\item Спуск с DFS, поддерживаем ДО на пути до текущей вершины.
	\item Heavy-light decomposition
	\item Centroid decomposition
	\item Корневая по запросам
	\item Тяжелые/легкие вершины
	\item DFS $\rightarrow$ дерево блоков, размеры $\in [K..2K]$
	\item У вершины не более $O(\sqrt{N})$ разных поддеревьев 
	\item Сумма размеров поддеревьев без тяжелого ребенка $O(n\log{n})$
	\item Сумма глубин поддеревьев без глубокого ребенка $O(n)$
\end{enumerate}
